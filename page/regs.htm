<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd">
<!-- saved from url=(0049)http://localhost:8080/HouseRent/page/register.jsp -->
<HTML xmlns="http://www.w3.org/1999/xhtml"><HEAD><TITLE>青鸟租房 - 用户注册</TITLE>
<META content="text/html; charset=utf-8" http-equiv=Content-Type><LINK 
rel=stylesheet type=text/css href="../css/style.css">
<script src="../js/vue.min.js"></script>
<script src="../js/axios.min.js"></script>
<META name=GENERATOR content="MSHTML 8.00.7601.17514"></HEAD>
<BODY>
<div id="app">
<DIV id=header class=wrap>
<DIV id=logo><IMG src="../images/logo.gif"></DIV></DIV>
<DIV id=regLogin class=wrap>
<DIV class=dialog>
<DL class=clearfix>
  <DT>新用户注册</DT>
  <DD class=past>填写个人信息</DD></DL>
<DIV class=box>
<FORM name="form1" id="form1" method="post">
<DIV class=infos>
<TABLE class=field>
  <TBODY>
  <TR>
    <TD class=field>用 户 名：</TD>
    <TD><INPUT class=text type=text name="name"> </TD></TR>
  <TR>
    <TD class=field>密　　码：</TD>
    <TD><INPUT class=text type=password name="password"></TD></TR>
  <!-- <TR>
    <TD class=field>确认密码：</TD>
    <TD><INPUT class=text type=password name=password> </TD></TR> -->
  <TR>
    <TD class=field>电　　话：</TD>
    <TD><INPUT class=text type=text name="telephone"> </TD></TR>
  <!-- <TR>
    <TD class=field>用户姓名：</TD>
    <TD><INPUT class=text type=text name=username> </TD>--></TR></TBODY></TABLE> 
<DIV class=buttons>
<INPUT @click="addUser()" value=立即注册 type=button>
</DIV></DIV></FORM></DIV></DIV></DIV>
<DIV id=footer class=wrap>

<DL>
  <DT>青鸟租房 © 2018 北大青鸟 京ICP证1000001号</DT>
  <DD>关于我们 · 联系方式 · 意见反馈 · 帮助中心</DD></DL></DIV></BODY></HTML>
</div>
</BODY>
</HTML>
  <script>
        axios.defaults.withCredentials=true; 
     // 配置请求的基准URL地址
    axios.defaults.baseURL = 'http://localhost:8080/';

    var vm=new Vue({
      el:"#app",
      data:{},
      methods:{
        addUser:function(){
           //获取表单数据，使有axios发送异步请求实现添加    注意:post方法默认不能传json  
                    //使用FormData对象封装表单数据
          //1.基于表单创建FormData对象  var formdata=new FormData(表单);
          //理解为formdata就是一个键值对集合
          // 键（表单名称）   值(表单对象值)
          //表单对象的名称一定要和请求参数的名称对应
          var formdata=new FormData(document.getElementById("form1"));
          //发送异步请求
          axios.post('userReg',formdata)
          .then(res => {
           if(res.data.result==1){
            location.href="login.htm"; 
           }
           if(res.data.result==0){
                alert("注册失败")
           }
          })
          .catch(err => {
            console.error(err); 
          })
        }
      }
    })
  </script>


