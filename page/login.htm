<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd">
<!-- saved from url=(0032)http://localhost:8080/HouseRent/ -->
<HTML xmlns="http://www.w3.org/1999/xhtml"><HEAD><TITLE>青鸟租房 - 用户登录</TITLE>
<META content="text/html; charset=utf-8" http-equiv=Content-Type><LINK 
rel=stylesheet type=text/css href="../css/style.css">
<script src="../js/vue.min.js"></script>
<script src="../js/axios.min.js"></script>
<META name=GENERATOR content="MSHTML 8.00.7601.17514"></HEAD>
<BODY>
  <div id="app">
<DIV id=header class=wrap>
<DIV id=logo><IMG src="../images/logo.gif"></DIV></DIV>
<DIV id=regLogin class=wrap>
<DIV class=dialog>
<DIV class=box>
<H4>用户登录</H4>
<FORM name="form1" id="form1" method="post">
<DIV class=infos>
<TABLE class=field>
  <TBODY>
  <TR>
    <TD colSpan=2></TD></TR>
  <TR>
    <TD class=field>用 户 名：</TD>
    <TD><!-- <input type="text" class="text" name="name" /> --><INPUT 
      id=user_name class=text type=text name="username"> </TD></TR>
  <TR>
    <TD class=field>密　　码：</TD>
    <TD><!-- <input type="password" class="text" name="password" /> --><INPUT 
      id=user_password class=text type=password name="password"> </TD></TR><!--
						<tr>
							<td class="field">验 证 码：</td>
							<td><input type="text" class="text verycode" name="veryCode" /></td>
						</tr>
						--></TBODY></TABLE>
<DIV class=buttons> <INPUT @click="loginAction()" value=登陆 type=button> 
  <INPUT onclick='document.location="regs.htm"' value=注册 type=button> 
</DIV></DIV></FORM></DIV></DIV></DIV>
<DIV id=footer class=wrap>

<DL>
  <DT>青鸟租房 © 2018 北大青鸟 京ICP证1000001号</DT>
  <DD>关于我们 · 联系方式 · 意见反馈 · 帮助中心</DD></DL></DIV></BODY></HTML>
</div>
</BODY>
</HTML>
  <script>

      //默认不支持session共享
      axios.defaults.withCredentials=true; 
     // 配置请求的基准URL地址
  axios.defaults.baseURL = 'http://localhost:8080/';

  var vm=new Vue({
     el:"#app",
     data:{},
     methods: {
      loginAction:function(){
            //获取用户名密码，发送异步请求到后台验证
           //1.基于表单创建FormData对象  var formdata=new FormData(表单);
           //表单的名称和请求的参数名称一样 
           var formdata=new FormData(document.getElementById("form1"));
           //2.发送异步请实现登入    使用formdata给axios的post方法传递
           axios.post(`userLogin`,formdata).then((ret) => {
            if(ret.data.result==1){
               location.href="guanli.htm";  //登入成功进入管理出租房页面
            }else{
              alert('用户名或密码不正确，你TM连用户名密码都记不住');
            }
          });
      }
     } 
  })
  </script>

